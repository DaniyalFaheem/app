<Window x:Class="FaceRecognitionAttendance.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns:converters="clr-namespace:FaceRecognitionAttendance.Converters"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="Face Recognition Attendance - Login" 
        Height="500" 
        Width="400"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize">
    
    <Grid>
        <!-- Background Image -->
        <Grid.Background>
            <ImageBrush ImageSource="/Resources/Images/background.jpg" 
                       Opacity="0.15" 
                       Stretch="UniformToFill"/>
        </Grid.Background>

        <Grid Margin="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,40">
                <TextBlock Text="ðŸŽ“" 
                          FontSize="48" 
                          HorizontalAlignment="Center"
                          Margin="0,0,0,10"/>
                <TextBlock Text="Face Recognition" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          HorizontalAlignment="Center"/>
                <TextBlock Text="Attendance System" 
                          FontSize="18" 
                          HorizontalAlignment="Center"
                          Foreground="Gray"/>
            </StackPanel>

            <!-- Login Form -->
            <StackPanel Grid.Row="1" VerticalAlignment="Center">
                <!-- Username -->
                <TextBlock Text="Username" 
                          FontSize="14" 
                          Margin="0,0,0,5"/>
                <TextBox Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" 
                        FontSize="14"
                        Height="35"
                        Padding="10,0"
                        Margin="0,0,0,20"/>

                <!-- Password -->
                <TextBlock Text="Password" 
                          FontSize="14" 
                          Margin="0,0,0,5"/>
                <PasswordBox x:Name="PasswordBox"
                            FontSize="14"
                            Height="35"
                            Padding="10,0"
                            Margin="0,0,0,10"
                            PasswordChanged="PasswordBox_PasswordChanged"/>

                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}" 
                          Foreground="Red"
                          FontSize="12"
                          TextWrapping="Wrap"
                          Margin="0,0,0,20"
                          Visibility="{Binding ErrorMessage, Converter={StaticResource BoolToVisibilityConverter}}"/>

                <!-- Login Button -->
                <Button Content="Login" 
                       Command="{Binding LoginCommand}"
                       Height="40"
                       FontSize="16"
                       FontWeight="SemiBold"
                       IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                       Style="{StaticResource AccentButtonStyle}"/>

                <!-- Loading Indicator -->
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Center"
                           Margin="0,15,0,0"
                           Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                    <ui:ProgressRing IsActive="{Binding IsLoading}" 
                                    Width="20" 
                                    Height="20"
                                    Margin="0,0,10,0"/>
                    <TextBlock Text="Authenticating..." 
                              FontSize="12"
                              Foreground="Gray"/>
                </StackPanel>
            </StackPanel>

            <!-- Footer -->
            <StackPanel Grid.Row="2" Margin="0,20,0,0">
                <TextBlock Text="Default credentials: admin / admin123" 
                          FontSize="11"
                          Foreground="Gray"
                          HorizontalAlignment="Center"
                          TextWrapping="Wrap"
                          TextAlignment="Center"/>
                <TextBlock Text="Version 2.0.0" 
                          FontSize="10"
                          Foreground="LightGray"
                          HorizontalAlignment="Center"
                          Margin="0,10,0,0"/>
            </StackPanel>
        </Grid>
    </Grid>

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ui:ThemeResources />
                <ui:XamlControlsResources />
            </ResourceDictionary.MergedDictionaries>
            
            <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            <converters:InverseBoolConverter x:Key="InverseBoolConverter"/>
        </ResourceDictionary>
    </Window.Resources>
</Window>
